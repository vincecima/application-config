---
- hosts: all
  tasks:
  - name: create deployer group
    group: name=deployer

  - name: create deployer user
    user: name=deployer group=deployer

  - name: enable deployer authorized_keys
    authorized_key: user=deployer key="ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAzEyrxBwhwaPiGORJsz6gjGoptCRM9+8ng5stQVY9CHBTgP1tJA72QN8bcm3IhZHsMegbR+tWoSXyg5L9Pv6VeSGoOKwXtpcCnDecSozBIS8ZTunJFGJS8jrOPI8TjnPUSba7JrJJ+uZEUvRuK89FRI+JOVpFlEf5xpdc/QKR+hcvqrg8hh/JBNgW7blcY/AJoPFCkcTKZC08M7Z49G/U2FLMF6ymOjUx8CoOgCyBpIFKh9KazqxSNtkRsS0K/dDizazkPmYxrxu+QMn/uIFeUfY4A0Qy+dWbqI5KdjnwNQCnIoZHsx2dHUV2I/vi/eUuoeXBJv9bvu2AMnB0X4mljQ== contact+ssh@vincecima.com"

  - name: create sysadmin group
    group: name=sysadmin

  - name: create sysadmin user
    user: name=sysadmin group=sysadmin

  - name: enable sysadmin authorized_keys
    authorized_key: user=sysadmin key="ssh-rsa AAAAB3NzaC1yc2EAAAABIwAAAQEAzEyrxBwhwaPiGORJsz6gjGoptCRM9+8ng5stQVY9CHBTgP1tJA72QN8bcm3IhZHsMegbR+tWoSXyg5L9Pv6VeSGoOKwXtpcCnDecSozBIS8ZTunJFGJS8jrOPI8TjnPUSba7JrJJ+uZEUvRuK89FRI+JOVpFlEf5xpdc/QKR+hcvqrg8hh/JBNgW7blcY/AJoPFCkcTKZC08M7Z49G/U2FLMF6ymOjUx8CoOgCyBpIFKh9KazqxSNtkRsS0K/dDizazkPmYxrxu+QMn/uIFeUfY4A0Qy+dWbqI5KdjnwNQCnIoZHsx2dHUV2I/vi/eUuoeXBJv9bvu2AMnB0X4mljQ== contact+ssh@vincecima.com"

  - name: configure sudoers
    lineinfile: dest=/etc/sudoers line="sysadmin ALL=(ALL) NOPASSWD:ALL" validate='visudo -cf %s'